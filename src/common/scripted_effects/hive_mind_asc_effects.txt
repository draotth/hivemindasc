# Given a species, create a mod with trait_hive_mind and apply to all pops, leaders
# and armies that have the original species and the same owner as the scope object.
# Scope: Something that has a species and an owner
create_hive_mind_species_mod = {
	species = {
		create_species = {
			is_mod = yes
			name = this
			plural = this
			class = this
			portrait = this
			traits = this
			traits = {
				trait = trait_hive_mind
			}

			homeworld = this
			
			pops_can_be_colonizers = yes
			pops_can_migrate = no
			pops_can_reproduce = yes
			pops_can_join_factions = no
			can_generate_leaders = yes
			pops_can_be_slaves = no
			pops_have_happiness = no
		}
		save_event_target_as = changing_species
	}

	owner = {
		every_owned_pop = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
			
			set_living_standard = {
				type = living_standard_hive_mind
				country = owner
			}
			set_citizenship_type = {
				country = owner
				type = citizenship_full
				cooldown = no
			}
		}
		every_owned_leader = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_pool_leader = {
			limit = { is_exact_same_species = event_target:changing_species }
			change_species = last_created_species
		}
		every_owned_army = {
			limit = {
				exists = species
				is_exact_same_species = event_target:changing_species
			}
			change_species = last_created_species
		}
		every_owned_ship = {
			limit = {
				is_ship_class = shipclass_colonizer
				is_exact_same_species = event_target:changing_species
			}
			change_species = last_created_species
		}
	}
}